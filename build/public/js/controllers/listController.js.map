{"version":3,"sources":["../../../../../../public/js/controllers/listController.js"],"names":[],"mappings":"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","file":"listController.js","sourcesContent":["\r\n'use strict';\r\n\r\ndefine(['controllers/controllerModule'], function (controllerModule) {\r\n\r\n\t controllerModule.controller('listController', ['userDetailsService','userTypeService','ngDialog', function(userDetailsService, userTypeService, ngDialog){\r\n\r\n\t \tthis.filter = false;\r\n\t \tthis.selected = {};\r\n\t \tvar that = this;\r\n\t \tconsole.log(ngDialog);\r\n \t\t\r\n\t  \tthis.showFilter = function(){\r\n\t\t\tconsole.log(\"get log\");\r\n\t\t\tthis.filter = !this.filter;\r\n\t\t}\r\n\r\n\t\tthis.render = function(){\r\n\t\t\t userDetailsService.get({ q: \"\", page:1 }, function(resObj) { \r\n\t\t\r\n\t\t\t\tthat.userList = resObj.searchResults;\r\n\t\t\r\n\t\t\t});\r\n\r\n\t\t\t userTypeService.query ({}, function(resObj){\r\n\t\t\t \t\r\n\t\t\t\tthat.userTypes = resObj;\r\n\t\t\t}); \r\n\t\t};\r\n\t\tthis.search = function(){\r\n\t\t\t\r\n\t\t\tif(typeof this.searchQ == \"undefined\" || this.searchQ == \"\") return;\r\n\t\t\tthis.selectedGender = this.selectedUserTypes = false;\r\n\t\t\tthis.minAge = this.maxAge = \"\";\r\n\t\t\tconsole.log(\"add loader\");\r\n\t\t\t\r\n\t\t\tuserDetailsService.get({ q: this.searchQ, page:1 }, function(resObj) { \r\n\t\t\t\tthat.userList = resObj.searchResults;\r\n\t\t\t\tconsole.log(\"remove Loader\");\r\n\t\t\t});\r\n\r\n\t\t};\r\n\t\tthis.getSelectedFromObject = function(obj){\r\n\t\t\tvar keys = Object.keys(obj);\r\n\t\t\tvar filtered = keys.filter(function(key) {\r\n\t\t\t    return obj[key]\r\n\t\t\t});\r\n\t\t\treturn filtered;\r\n\t\t};\r\n\t\tthis.filterSearch = function(){\r\n\t\t\t//alert(JSON.stringify(this.selected));\r\n\r\n\r\n\t\t\t//this.selectedFilter = \r\n\t\t\t//this.selectedFilter = angular.copy(this.selected);\r\n\t\t\t//alert(JSON.stringify(this.selectedFilter));\r\n\t\t\t if(typeof this.searchQ == \"undefined\" || this.searchQ == \"\") return;\r\n\t\t\tconsole.log(\"add loader\");\r\n\t\t\tvar filterObj = {\r\n\t\t\t\tq:this.searchQ,\r\n\t\t\t\tpage : 1\r\n\t\t\t};\r\n\t\t\t(this.minAge !== \"\") ? filterObj.minAge = this.minAge : false;\r\n\t\t\t(this.maxAge !== \"\") ? filterObj.maxAge = this.maxAge: false;\r\n\t\t\tif(typeof this.selectedUserTypes !== undefined){\r\n\t\t\t\tvar str = this.getSelectedFromObject(this.selectedUserTypes).toString();\r\n\t\t\t\t(str) ? filterObj.userType = str : false;\r\n\t\t\t}\r\n\t\t\tif(typeof this.selectedGender !== undefined){\r\n\t\t\t\tvar str = this.getSelectedFromObject(this.selectedGender).toString();\r\n\t\t\t\t(str) ? filterObj.gender = str : \"\";\r\n\t\t\t}\r\n\t\t\tuserDetailsService.get(filterObj, function(resObj) { \r\n\t\t\t\tthat.userList = resObj.searchResults;\r\n\t\t\t\tthat.filteredWith();\r\n\t\t\t\tconsole.log(\"remove Loader\");\r\n\t\t\t}); \r\n\r\n\t\t};\r\n\t\tthis.callBack = function(obj){\r\n\t\t\tngDialog.open({ template: 'views/common/confirmOverlay.html', className: 'ngdialog-theme-plain', this : this });\r\n\t\t};\r\n\t\tthis.filteredWith = function(){\r\n\t\t\t\r\n\r\n\t\t\tthis.selectedFilter = []\r\n\t\t\tvar minMaxAge = [];\r\n\t\t\tvar selectedUserTypes = this.selectedUserTypes;\r\n\t\t\tvar keys = Object.keys(this.selectedUserTypes);\r\n\t\t\tvar selectedUserFilter = this.userTypes.filter(function(user) {\r\n\t\t\t\tif(keys.indexOf(user.userTypeId) != -1 && selectedUserTypes[user.userTypeId]){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar selectedGender = this.getSelectedFromObject(this.selectedGender);\r\n\r\n\r\n\r\n\t\t\tselectedUserFilter = selectedUserFilter.map(function(user){\r\n\r\n\t\t\t\treturn {\"filterName\":user.userTypeName,\"filterObj\":function(){\t\r\n\r\n\t\t\t\t\tthat.selectedUserTypes[user.userTypeId] = false;\t\r\n\t\t\t\t\tthat.filterSearch();\r\n\r\n\t\t\t\t}};\r\n\r\n\t\t\t});\r\n\t\t\tconsole.log(selectedUserFilter);\r\n\r\n\t\t\tselectedGender = selectedGender.map(function(gender){\r\n\r\n\t\t\t\treturn {\"filterName\":that.getGender(gender),\"filterObj\":function(){\t\r\n\r\n\t\t\t\t\tthat.selectedGender[gender] = false;\t\r\n\t\t\t\t\tthat.filterSearch();\r\n\r\n\t\t\t\t}};\r\n\r\n\t\t\t});\r\n\t\t\tconsole.log(selectedGender);\r\n\t\t\t\r\n\t\t\tif(this.minAge !== \"\" && this.maxAge !== \"\") {\r\n\t\t\t\tminMaxAge.push({\"filterName\":\"Age \"+this.minAge + \" to \" + this.maxAge, \"filterObj\":function(){\t\r\n\t\t\t\t\tconsole.log(\"minAge\");\r\n\t\t\t\t\tthat.minAge = that.maxAge = \"\";\r\n\t\t\t\t\tthat.filterSearch();\r\n\r\n\t\t\t\t}});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.selectedFilter = this.selectedFilter.concat(selectedUserFilter, selectedGender, minMaxAge);\r\n\r\n\t\t\tconsole.log(this.selectedFilter);\r\n\t\t};\r\n\r\n\t\tthis.getGender = function(gender){\r\n\t\t\treturn gender === 'M' ? \"Male\" : \"Female\";\r\n\t\t};\r\n\r\n\t\tthis.removeSelectedFilter = function(opt){\r\n\t\t\talert(opt);\r\n\t\t}\r\n\r\n\t\tthis.enableDisableOption = function(){\r\n\t\t\t\tvar selectedUsers = this.getSelectedFromObject(this.selectedUsers);\r\n\t\t\t\t// disable edit button \r\n\t\t\t\tthis.disableEdit = (selectedUsers.length > 1) ? \"grey\" : \"\"; \r\n\t\t}\r\n\r\n\t\tthis.render();\r\n\r\n\t}]);\r\n\r\n});\r\n\r\n"]}